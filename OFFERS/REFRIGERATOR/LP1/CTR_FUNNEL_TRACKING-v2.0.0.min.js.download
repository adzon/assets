!function(t,n){'object'==typeof exports&&'object'==typeof module?module.exports=n():'function'==typeof define&&define.amd?define([],n):'object'==typeof exports?exports.__CTR_FUNNEL_TRACKING=n():t.__CTR_FUNNEL_TRACKING=n()}(window,function(){return o=[function(n,t){function o(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?n.exports=o=function(t){return typeof t}:n.exports=o=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n.exports.default=n.exports,n.exports.__esModule=!0,o(t)}n.exports=o,n.exports.default=n.exports,n.exports.__esModule=!0},function(t,n,o){"use strict";o.r(n),o.d(n,"trackConversion",function(){return O}),o.d(n,"trackExConversion",function(){return S});var n=o(0),r=o.n(n),e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=window.device,a={},c=[];window.device=a;var u=window.document.documentElement,s=window.navigator.userAgent.toLowerCase(),d=['googletv','viera','smarttv','internet.tv','netcast','nettv','appletv','boxee','kylo','roku','dlnadoc','pov_tv','hbbtv','ce-html'];function l(t,n){return-1!==t.indexOf(n)}function f(t){return l(s,t)}function p(t){return u.className.match(new RegExp(t,'i'))}function w(t){var n;p(t)||(n=u.className.replace(/^\s+|\s+$/g,''),u.className=n+' '+t)}function b(t){p(t)&&(u.className=u.className.replace(' '+t,''))}function y(){a.landscape()?(b('portrait'),w('landscape'),h('landscape')):(b('landscape'),w('portrait'),h('portrait')),_()}function h(t){for(var n=0;n<c.length;n++)c[n](t)}a.macos=function(){return f('mac')},a.ios=function(){return a.iphone()||a.ipod()||a.ipad()},a.iphone=function(){return!a.windows()&&f('iphone')},a.ipod=function(){return f('ipod')},a.ipad=function(){var t='MacIntel'===navigator.platform&&1<navigator.maxTouchPoints;return f('ipad')||t},a.android=function(){return!a.windows()&&f('android')},a.androidPhone=function(){return a.android()&&f('mobile')},a.androidTablet=function(){return a.android()&&!f('mobile')},a.blackberry=function(){return f('blackberry')||f('bb10')},a.blackberryPhone=function(){return a.blackberry()&&!f('tablet')},a.blackberryTablet=function(){return a.blackberry()&&f('tablet')},a.windows=function(){return f('windows')},a.windowsPhone=function(){return a.windows()&&f('phone')},a.windowsTablet=function(){return a.windows()&&f('touch')&&!a.windowsPhone()},a.fxos=function(){return(f('(mobile')||f('(tablet'))&&f(' rv:')},a.fxosPhone=function(){return a.fxos()&&f('mobile')},a.fxosTablet=function(){return a.fxos()&&f('tablet')},a.meego=function(){return f('meego')},a.cordova=function(){return window.cordova&&'file:'===location.protocol},a.nodeWebkit=function(){return'object'===e(window.process)},a.mobile=function(){return a.androidPhone()||a.iphone()||a.ipod()||a.windowsPhone()||a.blackberryPhone()||a.fxosPhone()||a.meego()},a.tablet=function(){return a.ipad()||a.androidTablet()||a.blackberryTablet()||a.windowsTablet()||a.fxosTablet()},a.desktop=function(){return!a.tablet()&&!a.mobile()},a.television=function(){for(var t=0;t<d.length;){if(f(d[t]))return!0;t++}return!1},a.portrait=function(){return screen.orientation&&Object.prototype.hasOwnProperty.call(window,'onorientationchange')?l(screen.orientation.type,'portrait'):a.ios()&&Object.prototype.hasOwnProperty.call(window,'orientation')?90!==Math.abs(window.orientation):1<window.innerHeight/window.innerWidth},a.landscape=function(){return screen.orientation&&Object.prototype.hasOwnProperty.call(window,'onorientationchange')?l(screen.orientation.type,'landscape'):a.ios()&&Object.prototype.hasOwnProperty.call(window,'orientation')?90===Math.abs(window.orientation):window.innerHeight/window.innerWidth<1},a.noConflict=function(){return window.device=i,this},a.ios()?a.ipad()?w('ios ipad tablet'):a.iphone()?w('ios iphone mobile'):a.ipod()&&w('ios ipod mobile'):a.macos()?w('macos desktop'):a.android()?a.androidTablet()?w('android tablet'):w('android mobile'):a.blackberry()?a.blackberryTablet()?w('blackberry tablet'):w('blackberry mobile'):a.windows()?a.windowsTablet()?w('windows tablet'):a.windowsPhone()?w('windows mobile'):w('windows desktop'):a.fxos()?a.fxosTablet()?w('fxos tablet'):w('fxos mobile'):a.meego()?w('meego mobile'):a.nodeWebkit()?w('node-webkit'):a.television()?w('television'):a.desktop()&&w('desktop'),a.cordova()&&w('cordova'),a.onChangeOrientation=function(t){'function'==typeof t&&c.push(t)};n='resize';function m(t){for(var n=0;n<t.length;n++)if(a[t[n]]())return t[n];return'unknown'}function _(){a.orientation=m(['portrait','landscape'])}Object.prototype.hasOwnProperty.call(window,'onorientationchange')&&(n='orientationchange'),window.addEventListener?window.addEventListener(n,y,!1):window.attachEvent?window.attachEvent(n,y):window[n]=y,y(),a.type=m(['mobile','tablet','desktop']),a.os=m(['ios','iphone','ipad','ipod','android','blackberry','macos','windows','fxos','meego','television']),_();var v=a,g=window.__CTR_FUNNEL_TRACKING_SETTINGS&&'dev'===window.__CTR_FUNNEL_TRACKING_SETTINGS.MODE?'https://ctrwow-dev-funnelbuilder-microservice.azurewebsites.net/api':'https://funnel.ctrwow.com/api';function T(t,n){var o={};if(!t)throw new Error('API URL is missing!');var e={'content-type':'application/json'};return n&&'object'===r()(n)&&(o=Object.assign({method:'GET',headers:n.headers?Object.assign(e,n.headers):e},n)),window.fetch(t,o).then(function(t){if(204===t.status||205===t.status)return null;if(200<=t.status&&t.status<300)return t.text().then(function(t){try{return t?JSON.parse(t):{}}catch(t){return{}}});throw JSON.stringify({status:t.status,statusText:t.statusText,response:t})})}function x(t,n){n=n||window.location.href,t=t.replace(/[\[\]]/g,'\\$&');n=new RegExp('[?&]'+t+'(=([^&#]*)|&|#|$)').exec(n);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g,' ')):'':null}function N(t){return t&&'[object Function]'==={}.toString.call(t)}function k(){if(!x('ctr_hid'))throw new Error('__CTR_FUNNEL_TRACKING: Missing ctr_hid')}function C(t){var n=t.ctr_hid,t=t.ctr_payout;return"ctr_hid=".concat(n,"&ctr_payout=").concat(t,"&ctr_device_type=").concat(v.desktop()?1:v.tablet()?2:v.mobile()?3:void 0)}function O(n,o){try{k();var t=x('ctr_hid'),e=x('ctr_payout')||0;T(g+"/funnelConversion?".concat(C({ctr_hid:t,ctr_payout:e})),{method:'POST'}).then(function(t){N(n)&&n(t)}).catch(function(t){N(o)&&o(t)})}catch(t){return console.warn('__CTR_FUNNEL_TRACKING: trackConversion error: '+t),console.warn('__CTR_FUNNEL_TRACKING: trackConversion error: '+t),!1}return!0}function S(n,o){try{k();var t,e,r='ctr_funnel_tracking_'+window.location.origin+window.location.pathname,i=x('ctr_hid'),a=window.localStorage.getItem(r);i&&a!=i&&(t=x('ctr_hid'),e=x('ctr_payout')||0,T(g+"/funnelConversion?".concat(C({ctr_hid:t,ctr_payout:e})),{method:'POST'}).then(function(t){window.localStorage.setItem(r,i),N(n)&&n(t)}).catch(function(t){N(o)&&o(t)}))}catch(t){return console.warn('__CTR_FUNNEL_TRACKING: trackConversion error: '+t),!1}return!0}console.log('__CTR_FUNNEL_TRACKING: init')}],e={},r.m=o,r.c=e,r.d=function(t,n,o){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:o})},r.r=function(t){'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(t,'__esModule',{value:!0})},r.t=function(n,t){if(1&t&&(n=r(n)),8&t)return n;if(4&t&&'object'==typeof n&&n&&n.__esModule)return n;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,'default',{enumerable:!0,value:n}),2&t&&'string'!=typeof n)for(var e in n)r.d(o,e,function(t){return n[t]}.bind(null,e));return o},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,'a',n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=1);function r(t){if(e[t])return e[t].exports;var n=e[t]={i:t,l:!1,exports:{}};return o[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}var o,e});